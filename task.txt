bugs
bottom of screen:
favorites icon needs a transparent area over it much larger to toggle favorite
trash stack counter is not clickable
when swiping to trash stack (recycle) the visual queue of the edge glow is not visible

Device B picking up device A changes:
Root Cause: Local Cache Overrides Cloud appProperties
The Problem: Device B prioritizes stale local cache over fresh Google Drive appProperties.
Code Flow Analysis:
Device A moves files → updateUserMetadata() → updateFileProperties() saves to Google Drive appProperties ✅
Device B loads folder:getFilesAndMetadata() fetches files with appProperties from cloud ✅
processAllMetadata() processes each file:
javascript
const metadata = await state.dbManager.getMetadata(file.id); if (metadata) { Object.assign(file, metadata); // ❌ USES STALE LOCAL CACHE } else { const defaultMetadata = this.generateDefaultMetadata(file); // ✅ Only called if NO cache Object.assign(file, defaultMetadata); }

The Bug:
If Device B has ANY cached metadata for a file, it uses that
generateDefaultMetadata() (which reads appProperties) only runs when cache is empty
Cloud appProperties are completely ignored if local cache exists

Why It's Folder-Specific:
Folders with no prior cache work (reads appProperties)
Folders with stale cache fail (ignores appProperties)
Fix: In processAllMetadata(), always merge cloud appProperties into cached metadata:
javascript
const defaultMetadata = this.generateDefaultMetadata(file);if (metadata) { // Merge cloud appProperties over cached metadata Object.assign(file, metadata, defaultMetadata);} else { Object.assign(file, defaultMetadata);}
This ensures cloud appProperties always take precedence over stale local cache.


Search Enhancements
Exclusion Queries: Implemented the ability to prefix search terms with a hyphen (-) to exclude items matching that term from the results.
Expanded Search Scope: The search functionality now indexes across filenames, dates, tags, notes, and all embedded PNG metadata.
Favorite & Rating Queries: Added special search modifiers:
#favorite to filter for all favorited images.
#quality:X to filter for images with a specific quality rating (e.g., #quality:5).
#content:X to filter for images with a specific content rating (e.g., #content:3).
Three-Pass Search Logic: The search algorithm now follows a specific order of operations:
Filters by special modifiers (#favorite, #quality, #content).
Filters the remaining results by positive keywords (e.g., landscape).
Applies exclusion filters to the final set (e.g., -portrait).
Search Help Icon: Added an informational "i" icon next to the search bar. Hovering over it displays a list of clickable special modifiers that can be appended to the current search query.
Empty Search Results: Fixed an issue where the grid would not correctly display an empty state. It now shows a "0" count and an empty grid when a search yields no results.

Tagging UI
Immediate Tag Display: When adding tags in the bulk-edit modal, hitting "Enter" now immediately displays the new tag as a chip.
Tag Removal: Each newly created tag chip includes an "x" icon, allowing it to be removed immediately after being added.

Modal Functionality
Draggable & Resizable Modals: Both the Details Modal and the Grid Modal modified to be fully draggable and resizable.

Modal Reset:
Double-clicking the title bar of the Details Modal resets it to its maximum size.
Double-clicking the title bar of the Grid Modal resets it to a full-screen view and scrolls to the top.
